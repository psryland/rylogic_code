<Grid
	x:Class="Rylogic.Gui.WPF.ChartControl"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
	xmlns:gui2="clr-namespace:Rylogic.Gui.WPF"
	xmlns:local="clr-namespace:Rylogic.Gui.WPF.ChartDetail"
	mc:Ignorable="d" 
	d:DesignHeight="450" d:DesignWidth="800"
	Background="#EEE"
	>

	<Grid.Resources>
		<ResourceDictionary>
			<gui2:ScaleConverter x:Key="Scale"/>
			<gui2:NullToCollapsed x:Key="NullToCollapsed"/>
			<gui2:BoolToVisible x:Key="BoolToVisible"/>
			<gui2:AnyTrue x:Key="AnyTrue"/>
		</ResourceDictionary>
	</Grid.Resources>

	<Grid.ColumnDefinitions>
		<ColumnDefinition Width="Auto"/>
		<ColumnDefinition Width="*"/>
		<ColumnDefinition Width="Auto"/>
	</Grid.ColumnDefinitions>
	<Grid.RowDefinitions>
		<RowDefinition Height="Auto"/>
		<RowDefinition Height="*"/>
		<RowDefinition Height="Auto"/>
	</Grid.RowDefinitions>

	<!-- Title -->
	<Label
		x:Name="m_lbl_title"
		Grid.Row="0"
		Grid.Column="1"
		Content="{Binding Title}"
		Visibility="{Binding Title, Converter={StaticResource NullToCollapsed}}"
		HorizontalAlignment="Center"
		FontWeight="Bold"
		/>
	
	<!-- X Axis Bottom -->
	<StackPanel
		Orientation="Vertical"
		Grid.Column="1"
		Grid.Row="2"
		Visibility="{Binding Options.ShowAxes, Converter={StaticResource BoolToVisible}}"
		>
		
		<!-- Tick marks and values -->
		<local:AxisPanel
			x:Name="m_ap_xaxis_bottom"
			Side="Bottom"
			Height="{Binding AxisSize}"
			Visibility="{Binding Axis, Converter={StaticResource NullToCollapsed}}"
			/>

		<!-- Axis label -->
		<TextBlock
			Text="{Binding XAxis.Label}"
			Visibility="{Binding XAxis.Label, Converter={StaticResource NullToCollapsed}}"
			HorizontalAlignment="Center"
			/>
	</StackPanel>
	
	<!-- Y Axis Left -->
	<StackPanel
		Orientation="Horizontal"
		Grid.Column="0"
		Grid.Row="1"
		Visibility="{Binding Options.ShowAxes, Converter={StaticResource BoolToVisible}}"
		>

		<!-- Axis label -->
		<TextBlock
			Text="{Binding YAxis.Label}"
			Visibility="{Binding YAxis.Label, Converter={StaticResource NullToCollapsed}}"
			VerticalAlignment="Center"
			RenderTransformOrigin="0.0,0.0"
			>
			<TextBlock.LayoutTransform>
				<TransformGroup>
					<RotateTransform Angle="-90"/>
					<TranslateTransform X="0" Y="{Binding ActualWidth, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type TextBlock}}, Converter={StaticResource Scale}, ConverterParameter=0.5}"/>
				</TransformGroup>
			</TextBlock.LayoutTransform>
		</TextBlock>

		<!-- Tick marks and values -->
		<local:AxisPanel
			x:Name="m_ap_yaxis_left"
			Side="Left"
			Width="{Binding AxisSize}"
			Visibility="{Binding Axis, Converter={StaticResource NullToCollapsed}}"
			/>
	</StackPanel>

	<!-- Chart area -->
	<Grid
		Grid.Column="1"
		Grid.Row="1"
		Background="Black"
		>
		<local:ChartPanel
			x:Name="m_chart_panel"
			Stretch="Fill"
			/>
	</Grid>
	
</Grid>
